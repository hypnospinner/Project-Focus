<Window x:Class="ToDo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ToDo"
        mc:Ignorable="d"
        Title="ToDosha" Height="450" Width="800">
   <Window.Resources>
     <Style x:Key="BaseStyle" TargetType="Control">
       <Setter Property="Margin" Value="10"/>
       <Setter Property="MinHeight" Value="40"/>
       <Setter Property="MinWidth" Value="40"/>
       <Setter Property="BorderBrush" Value="Black"/>
       <Setter Property="BorderThickness" Value="1"/>
       <Setter Property="HorizontalAlignment" Value="Stretch"/>
     </Style>

     <!-- BUTTON -->
     <Style x:Key="AddButtonStyle" TargetType="Button" 
            BasedOn="{StaticResource BaseStyle}">
       <Setter Property="Width" Value="50"></Setter>
     </Style>

     <!-- TEXTBOX -->
     <Style x:Key="TextBoxStyle" TargetType="TextBox"
            BasedOn="{StaticResource BaseStyle}">
       <Setter Property="HorizontalAlignment" Value="Stretch"/>
     </Style>

     <Style x:Key="BaseTextBlockStyle" TargetType="TextBlock">
       <Setter Property="Height" Value="Auto"/>
     </Style>

     <!-- TASKLIST / ITEM -->
      <Style x:Key="TaskListItemStyle" TargetType="TextBlock"
             BasedOn="{StaticResource BaseTextBlockStyle}">
          <Setter Property="Foreground" Value="Black" />
      </Style>

     <!-- TODO / ITEM -->
      <Style x:Key="ToDoItemStyle" TargetType="TextBlock"
             BasedOn="{StaticResource BaseTextBlockStyle}">
          <Setter Property="Foreground" Value="Black" />
      </Style>
     
    </Window.Resources>
    <Grid>
      <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="3*" />
      </Grid.ColumnDefinitions>

      <!--<Grid.RowDefinitions>
        <RowDefinition Height="auto" />
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>-->
      
      <!-- TASKLISTS -->
      <StackPanel Orientation="Vertical" Grid.Column="0" Grid.Row="0">
        <ListBox ItemsSource="{Binding TaskLists}"
                SelectedItem="{Binding SelectedTaskList}">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Path=TaskListTitle}"
                         Style="{StaticResource TaskListItemStyle}"/>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
        <DockPanel>
          <Button Style="{StaticResource AddButtonStyle}" Command="{Binding AddTaskList}"
                 Content="+"
                  />
          <TextBox Text="{Binding NewTaskListName, UpdateSourceTrigger=PropertyChanged}"
                 Style="{StaticResource TextBoxStyle}"/>
        </DockPanel>
      </StackPanel>
      
      <!-- TODO ITEMS -->
      <StackPanel Grid.Column="1">
        <ListView ItemsSource="{Binding Path=SelectedTaskList.Tasks}"
            SelectedItem="{Binding Path=SelectedTaskList.SelectedTask}">
          <ListView.ItemTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal">
                <CheckBox IsChecked="{ Binding Path=IsDone }" Margin="3"/>
                <TextBlock Text="{Binding Path=TaskTitle}"
                           Style="{StaticResource ToDoItemStyle}"/>
              </StackPanel>
            </DataTemplate>
          </ListView.ItemTemplate>
        </ListView>
        <DockPanel>
          <Button Command="{Binding AddTask}"
                  Style="{StaticResource AddButtonStyle}">+</Button>
          <TextBox Text="{Binding NewTaskName, UpdateSourceTrigger=PropertyChanged}"
                   Style="{StaticResource TextBoxStyle}"/>
        </DockPanel>
      </StackPanel>
        
    </Grid>
</Window>
